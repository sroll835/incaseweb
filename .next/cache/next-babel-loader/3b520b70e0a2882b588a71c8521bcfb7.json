{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Layout from \"../components/layout\";\nimport { login } from \"../utils/auth\";\n\nclass Login extends Component {\n  static getInitialProps({\n    req\n  }) {\n    const protocol = false ? \"https\" : \"http\";\n    const apiUrl = false ? `${protocol}://${window.location.host}/api/login.js` : `${protocol}://${req.headers.host}/api/login.js`;\n    return {\n      apiUrl\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      error: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      username: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const username = this.state.username;\n    const url = this.props.apiUrl;\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username\n        })\n      });\n\n      if (response.ok) {\n        const {\n          token\n        } = await response.json();\n        login({\n          token\n        });\n      } else {\n        console.log(\"Login failed.\"); // https://github.com/developit/unfetch#caveats\n\n        let error = new Error(response.statusText);\n        error.response = response;\n        return Promise.reject(error);\n      }\n    } catch (error) {\n      console.error(\"You have an error in your code or there are Network issues.\", error);\n      throw new Error(error);\n    }\n  }\n\n  render() {\n    return __jsx(Layout, null, __jsx(\"div\", {\n      className: \"jsx-923656326\" + \" \" + \"login\"\n    }, __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"jsx-923656326\"\n    }, __jsx(\"label\", {\n      htmlFor: \"username\",\n      className: \"jsx-923656326\"\n    }, \"username\"), __jsx(\"input\", {\n      type: \"text\",\n      id: \"username\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      className: \"jsx-923656326\"\n    }), __jsx(\"button\", {\n      type: \"submit\",\n      className: \"jsx-923656326\"\n    }, \"Login\"), __jsx(\"p\", {\n      className: \"jsx-923656326\" + \" \" + `error ${this.state.error && \"show\"}`\n    }, this.state.error && `Error: ${this.state.error}`))), __jsx(_JSXStyle, {\n      id: \"923656326\"\n    }, \".login.jsx-923656326{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-923656326{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-923656326{font-weight:600;}input.jsx-923656326{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-923656326{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-923656326{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2ViYXN0aWFuXFxEZXNrdG9wXFxpbmNhc2V3ZWJcXHBhZ2VzXFxsb2dpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnRm9CLEFBRzZCLEFBT0gsQUFJRyxBQUdKLEFBTU0sQUFLSixZQVZPLEVBV3ZCLEVBekJnQixBQVdoQixFQVNlLFlBbkJBLENBb0JELEVBTlUsVUFiQSxBQW9CeEIsWUFOb0IsVUFiQSxRQWNwQixDQVZtQixTQUhuQixzREFJQSIsImZpbGUiOiJDOlxcVXNlcnNcXFNlYmFzdGlhblxcRGVza3RvcFxcaW5jYXNld2ViXFxwYWdlc1xcbG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGZldGNoIGZyb20gXCJpc29tb3JwaGljLXVuZmV0Y2hcIjtcclxuaW1wb3J0IExheW91dCBmcm9tIFwiLi4vY29tcG9uZW50cy9sYXlvdXRcIjtcclxuaW1wb3J0IHsgbG9naW4gfSBmcm9tIFwiLi4vdXRpbHMvYXV0aFwiO1xyXG5cclxuY2xhc3MgTG9naW4gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBnZXRJbml0aWFsUHJvcHMoeyByZXEgfSkge1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcclxuXHJcbiAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmJyb3dzZXJcclxuICAgICAgPyBgJHtwcm90b2NvbH06Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fS9hcGkvbG9naW4uanNgXHJcbiAgICAgIDogYCR7cHJvdG9jb2x9Oi8vJHtyZXEuaGVhZGVycy5ob3N0fS9hcGkvbG9naW4uanNgO1xyXG5cclxuICAgIHJldHVybiB7IGFwaVVybCB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0geyB1c2VybmFtZTogXCJcIiwgZXJyb3I6IFwiXCIgfTtcclxuICAgIHRoaXMuaGFuZGxlQ2hhbmdlID0gdGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNoYW5nZShldmVudCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBldmVudC50YXJnZXQudmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IHRoaXMuc3RhdGUudXNlcm5hbWU7XHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLnByb3BzLmFwaVVybDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCB7IHRva2VuIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgbG9naW4oeyB0b2tlbiB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkxvZ2luIGZhaWxlZC5cIik7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC91bmZldGNoI2NhdmVhdHNcclxuICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIFwiWW91IGhhdmUgYW4gZXJyb3IgaW4geW91ciBjb2RlIG9yIHRoZXJlIGFyZSBOZXR3b3JrIGlzc3Vlcy5cIixcclxuICAgICAgICBlcnJvclxyXG4gICAgICApO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPExheW91dD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ2luXCI+XHJcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxyXG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInVzZXJuYW1lXCI+dXNlcm5hbWU8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgIGlkPVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgIG5hbWU9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxyXG4gICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+TG9naW48L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17YGVycm9yICR7dGhpcy5zdGF0ZS5lcnJvciAmJiBcInNob3dcIn1gfT5cclxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvciAmJiBgRXJyb3I6ICR7dGhpcy5zdGF0ZS5lcnJvcn1gfVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgLmxvZ2luIHtcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiAzNDBweDtcclxuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvcm0ge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhYmVsIHtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlucHV0IHtcclxuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xyXG4gICAgICAgICAgICBtYXJnaW46IDAuM3JlbSAwIDFyZW07XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5lcnJvciB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDAgMDtcclxuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgY29sb3I6IGJyb3duO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLmVycm9yLnNob3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgIH1cclxuICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgIDwvTGF5b3V0PlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZ2luO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Sebastian\\\\\\\\Desktop\\\\\\\\incaseweb\\\\\\\\pages\\\\\\\\login.js */\"));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Sebastian/Desktop/incaseweb/pages/login.js"],"names":["Component","fetch","Layout","login","Login","getInitialProps","req","protocol","apiUrl","window","location","host","headers","constructor","props","state","username","error","handleChange","bind","handleSubmit","event","setState","target","value","preventDefault","url","response","method","body","JSON","stringify","ok","token","json","console","log","Error","statusText","Promise","reject","render"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport fetch from \"isomorphic-unfetch\";\r\nimport Layout from \"../components/layout\";\r\nimport { login } from \"../utils/auth\";\r\n\r\nclass Login extends Component {\r\n  static getInitialProps({ req }) {\r\n    const protocol = process.env.NODE_ENV === \"production\" ? \"https\" : \"http\";\r\n\r\n    const apiUrl = process.browser\r\n      ? `${protocol}://${window.location.host}/api/login.js`\r\n      : `${protocol}://${req.headers.host}/api/login.js`;\r\n\r\n    return { apiUrl };\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { username: \"\", error: \"\" };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ username: event.target.value });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    const username = this.state.username;\r\n    const url = this.props.apiUrl;\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ username }),\r\n      });\r\n      if (response.ok) {\r\n        const { token } = await response.json();\r\n        login({ token });\r\n      } else {\r\n        console.log(\"Login failed.\");\r\n        // https://github.com/developit/unfetch#caveats\r\n        let error = new Error(response.statusText);\r\n        error.response = response;\r\n        return Promise.reject(error);\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        \"You have an error in your code or there are Network issues.\",\r\n        error\r\n      );\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <div className=\"login\">\r\n          <form onSubmit={this.handleSubmit}>\r\n            <label htmlFor=\"username\">username</label>\r\n\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              name=\"username\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n            />\r\n\r\n            <button type=\"submit\">Login</button>\r\n\r\n            <p className={`error ${this.state.error && \"show\"}`}>\r\n              {this.state.error && `Error: ${this.state.error}`}\r\n            </p>\r\n          </form>\r\n        </div>\r\n        <style jsx>{`\r\n          .login {\r\n            max-width: 340px;\r\n            margin: 0 auto;\r\n            padding: 1rem;\r\n            border: 1px solid #ccc;\r\n            border-radius: 4px;\r\n          }\r\n          form {\r\n            display: flex;\r\n            flex-flow: column;\r\n          }\r\n          label {\r\n            font-weight: 600;\r\n          }\r\n          input {\r\n            padding: 8px;\r\n            margin: 0.3rem 0 1rem;\r\n            border: 1px solid #ccc;\r\n            border-radius: 4px;\r\n          }\r\n          .error {\r\n            margin: 0.5rem 0 0;\r\n            display: none;\r\n            color: brown;\r\n          }\r\n          .error.show {\r\n            display: block;\r\n          }\r\n        `}</style>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}