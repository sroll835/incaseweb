{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Layout from \"../components/layout\";\nimport { login } from \"../api/login\";\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  _createClass(Login, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req = _ref.req;\n      var protocol = false ? 'https' : 'http';\n      var apiUrl = 'http://localhost:8080/auth/login';\n      return {\n        apiUrl: apiUrl\n      };\n    }\n  }]);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      correo: \"\",\n      clave: \"\",\n      error: \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.handleChangePassword = _this.handleChangePassword.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        correo: event.target.value\n      });\n    }\n  }, {\n    key: \"handleChangePassword\",\n    value: function handleChangePassword(event) {\n      this.setState({\n        clave: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _correo, _clave, url, body, response, error;\n\n      return _regeneratorRuntime.async(function handleSubmit$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.prev = 1;\n              _correo = this.state.correo;\n              _clave = this.state.clave;\n              url = this.props.apiUrl;\n              body = {\n                correo: _correo,\n                clave: _clave\n              };\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(fetch(url, {\n                method: \"POST\",\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(body)\n              }).then(function (data) {\n                // `data` is the parsed version of the JSON returned from the above endpoint.\n                console.log(\"Holanda\" + data.body.json()); // { \"userId\": 1, \"id\": 1, \"title\": \"...\", \"body\": \"...\" }\n              }));\n\n            case 8:\n              response = _context.sent;\n\n              if (!(response.status === 201)) {\n                _context.next = 13;\n                break;\n              }\n\n              console.log(\"Reponse\" + response.text()); //   const { access_token } = await response.json();\n              //   login({ access_token });\n\n              _context.next = 17;\n              break;\n\n            case 13:\n              console.log(\"Login failed.\"); // https://github.com/developit/unfetch#caveats\n\n              error = new Error(response.statusText);\n              error.response = response;\n              return _context.abrupt(\"return\", Promise.reject(error));\n\n            case 17:\n              _context.next = 23;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](1);\n              console.error(\"You have an error in your code or there are Network issues.\", _context.t0);\n              throw new Error(_context.t0);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[1, 19]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, null, __jsx(\"div\", {\n        className: \"jsx-923656326\" + \" \" + \"login\"\n      }, __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"jsx-923656326\"\n      }, __jsx(\"label\", {\n        htmlFor: \"correo\",\n        className: \"jsx-923656326\"\n      }, \"username\"), __jsx(\"input\", {\n        type: \"text\",\n        id: \"correo\",\n        name: \"correo\",\n        value: this.state.correo,\n        onChange: this.handleChange,\n        className: \"jsx-923656326\"\n      }), __jsx(\"label\", {\n        htmlFor: \"clave\",\n        className: \"jsx-923656326\"\n      }, \"password\"), __jsx(\"input\", {\n        type: \"text\",\n        id: \"clave\",\n        name: \"clave\",\n        value: this.state.clave,\n        onChange: this.handleChangePassword,\n        className: \"jsx-923656326\"\n      }), __jsx(\"button\", {\n        type: \"submit\",\n        className: \"jsx-923656326\"\n      }, \"Login\"), __jsx(\"p\", {\n        className: \"jsx-923656326\" + \" \" + \"error \".concat(this.state.error && \"show\")\n      }, this.state.error && \"Error: \".concat(this.state.error)))), __jsx(_JSXStyle, {\n        id: \"923656326\"\n      }, \".login.jsx-923656326{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-923656326{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-923656326{font-weight:600;}input.jsx-923656326{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-923656326{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-923656326{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcUmlhbm9cXERvY3VtZW50c1xcZ29jYXJcXGluY2FzZXdlYlxccGFnZXNcXGxvZ2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVHb0IsQUFHNkIsQUFPSCxBQUlHLEFBR0osQUFNTSxBQUtKLFlBVk8sRUFXdkIsRUF6QmdCLEFBV2hCLEVBU2UsWUFuQkEsQ0FvQkQsRUFOVSxVQWJBLEFBb0J4QixZQU5vQixVQWJBLFFBY3BCLENBVm1CLFNBSG5CLHNEQUlBIiwiZmlsZSI6IkM6XFxVc2Vyc1xcUmlhbm9cXERvY3VtZW50c1xcZ29jYXJcXGluY2FzZXdlYlxccGFnZXNcXGxvZ2luLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBmZXRjaCBmcm9tIFwiaXNvbW9ycGhpYy11bmZldGNoXCI7XHJcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvbGF5b3V0XCI7XHJcbmltcG9ydCB7IGxvZ2luIH0gZnJvbSBcIi4uL2FwaS9sb2dpblwiO1xyXG5cclxuY2xhc3MgTG9naW4gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBnZXRJbml0aWFsUHJvcHMgKHsgcmVxIH0pIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICdodHRwcycgOiAnaHR0cCdcclxuXHJcbiAgICBjb25zdCBhcGlVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2F1dGgvbG9naW4nXHJcblxyXG4gICAgcmV0dXJuIHsgYXBpVXJsIH1cclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHsgY29ycmVvOiBcIlwiLCBjbGF2ZTpcIlwiLCBlcnJvcjogXCJcIiB9O1xyXG4gICAgdGhpcy5oYW5kbGVDaGFuZ2UgPSB0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVDaGFuZ2VQYXNzd29yZCA9IHRoaXMuaGFuZGxlQ2hhbmdlUGFzc3dvcmQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNoYW5nZShldmVudCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGNvcnJlbzogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xyXG4gIH1cclxuICBcclxuaGFuZGxlQ2hhbmdlUGFzc3dvcmQoZXZlbnQpXHJcbntcclxuICB0aGlzLnNldFN0YXRlKHsgY2xhdmU6IGV2ZW50LnRhcmdldC52YWx1ZSB9KTtcclxufVxyXG4gIGFzeW5jIGhhbmRsZVN1Ym1pdChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBfY29ycmVvID0gdGhpcy5zdGF0ZS5jb3JyZW87XHJcbiAgICAgIGNvbnN0IF9jbGF2ZSA9IHRoaXMuc3RhdGUuY2xhdmU7XHJcbiAgICAgIGNvbnN0IHVybCA9IHRoaXMucHJvcHMuYXBpVXJsO1xyXG4gICAgIGNvbnN0IGJvZHkgPSB7IGNvcnJlbzogX2NvcnJlbyxjbGF2ZTogX2NsYXZlIH07XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB7IFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgICAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgLy8gYGRhdGFgIGlzIHRoZSBwYXJzZWQgdmVyc2lvbiBvZiB0aGUgSlNPTiByZXR1cm5lZCBmcm9tIHRoZSBhYm92ZSBlbmRwb2ludC5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIkhvbGFuZGFcIisgZGF0YS5ib2R5Lmpzb24oKSk7ICAvLyB7IFwidXNlcklkXCI6IDEsIFwiaWRcIjogMSwgXCJ0aXRsZVwiOiBcIi4uLlwiLCBcImJvZHlcIjogXCIuLi5cIiB9XHJcbiAgICAgIH0pO1xyXG4gICAgIFxyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICBjb25zb2xlLmxvZyhcIlJlcG9uc2VcIityZXNwb25zZS50ZXh0KCkpXHJcbiAgICAgLy8gICBjb25zdCB7IGFjY2Vzc190b2tlbiB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgIC8vICAgbG9naW4oeyBhY2Nlc3NfdG9rZW4gfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMb2dpbiBmYWlsZWQuXCIpO1xyXG4gICAgICBcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3VuZmV0Y2gjY2F2ZWF0c1xyXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgXCJZb3UgaGF2ZSBhbiBlcnJvciBpbiB5b3VyIGNvZGUgb3IgdGhlcmUgYXJlIE5ldHdvcmsgaXNzdWVzLlwiLFxyXG4gICAgICAgIGVycm9yXHJcbiAgICAgICk7XHJcbiAgICAgXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPExheW91dD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ2luXCI+XHJcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxyXG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImNvcnJlb1wiPnVzZXJuYW1lPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBpZD1cImNvcnJlb1wiXHJcbiAgICAgICAgICAgICAgbmFtZT1cImNvcnJlb1wiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuY29ycmVvfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiY2xhdmVcIj5wYXNzd29yZDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBpZD1cImNsYXZlXCJcclxuICAgICAgICAgICAgICBuYW1lPVwiY2xhdmVcIlxyXG4gICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNsYXZlfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZVBhc3N3b3JkfVxyXG4gICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+TG9naW48L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17YGVycm9yICR7dGhpcy5zdGF0ZS5lcnJvciAmJiBcInNob3dcIn1gfT5cclxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvciAmJiBgRXJyb3I6ICR7dGhpcy5zdGF0ZS5lcnJvcn1gfVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgLmxvZ2luIHtcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiAzNDBweDtcclxuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvcm0ge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhYmVsIHtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlucHV0IHtcclxuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xyXG4gICAgICAgICAgICBtYXJnaW46IDAuM3JlbSAwIDFyZW07XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5lcnJvciB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDAgMDtcclxuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgY29sb3I6IGJyb3duO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLmVycm9yLnNob3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgIH1cclxuICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgIDwvTGF5b3V0PlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZ2luO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Riano\\\\\\\\Documents\\\\\\\\gocar\\\\\\\\incaseweb\\\\\\\\pages\\\\\\\\login.js */\"));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Riano/Documents/gocar/incaseweb/pages/login.js"],"names":["Component","fetch","Layout","login","Login","req","protocol","apiUrl","props","state","correo","clave","error","handleChange","bind","handleSubmit","handleChangePassword","event","setState","target","value","preventDefault","_correo","_clave","url","body","method","headers","JSON","stringify","then","data","console","log","json","response","status","text","Error","statusText","Promise","reject"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport fetch from \"isomorphic-unfetch\";\r\nimport Layout from \"../components/layout\";\r\nimport { login } from \"../api/login\";\r\n\r\nclass Login extends Component {\r\n  static getInitialProps ({ req }) {\r\n    const protocol = process.env.NODE_ENV === 'production' ? 'https' : 'http'\r\n\r\n    const apiUrl = 'http://localhost:8080/auth/login'\r\n\r\n    return { apiUrl }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { correo: \"\", clave:\"\", error: \"\" };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChangePassword = this.handleChangePassword.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ correo: event.target.value });\r\n  }\r\n  \r\nhandleChangePassword(event)\r\n{\r\n  this.setState({ clave: event.target.value });\r\n}\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n   \r\n    try {\r\n      const _correo = this.state.correo;\r\n      const _clave = this.state.clave;\r\n      const url = this.props.apiUrl;\r\n     const body = { correo: _correo,clave: _clave };\r\n      const response = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: { \r\n        'Content-Type': 'application/json' },\r\n        body: JSON.stringify(body),\r\n      }).then(function(data) {\r\n        // `data` is the parsed version of the JSON returned from the above endpoint.\r\n        console.log(\"Holanda\"+ data.body.json());  // { \"userId\": 1, \"id\": 1, \"title\": \"...\", \"body\": \"...\" }\r\n      });\r\n     \r\n\r\n      if (response.status === 201) {\r\n       console.log(\"Reponse\"+response.text())\r\n     //   const { access_token } = await response.json();\r\n     //   login({ access_token });\r\n      } else {\r\n        console.log(\"Login failed.\");\r\n      \r\n        // https://github.com/developit/unfetch#caveats\r\n        let error = new Error(response.statusText);\r\n        error.response = response;\r\n        return Promise.reject(error);\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        \"You have an error in your code or there are Network issues.\",\r\n        error\r\n      );\r\n     \r\n      throw new Error(error);\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <div className=\"login\">\r\n          <form onSubmit={this.handleSubmit}>\r\n            <label htmlFor=\"correo\">username</label>\r\n\r\n            <input\r\n              type=\"text\"\r\n              id=\"correo\"\r\n              name=\"correo\"\r\n              value={this.state.correo}\r\n              onChange={this.handleChange}\r\n            />\r\n             <label htmlFor=\"clave\">password</label>\r\n               <input\r\n              type=\"text\"\r\n              id=\"clave\"\r\n              name=\"clave\"\r\n              value={this.state.clave}\r\n              onChange={this.handleChangePassword}\r\n            />\r\n\r\n            <button type=\"submit\">Login</button>\r\n\r\n            <p className={`error ${this.state.error && \"show\"}`}>\r\n              {this.state.error && `Error: ${this.state.error}`}\r\n            </p>\r\n          </form>\r\n        </div>\r\n        <style jsx>{`\r\n          .login {\r\n            max-width: 340px;\r\n            margin: 0 auto;\r\n            padding: 1rem;\r\n            border: 1px solid #ccc;\r\n            border-radius: 4px;\r\n          }\r\n          form {\r\n            display: flex;\r\n            flex-flow: column;\r\n          }\r\n          label {\r\n            font-weight: 600;\r\n          }\r\n          input {\r\n            padding: 8px;\r\n            margin: 0.3rem 0 1rem;\r\n            border: 1px solid #ccc;\r\n            border-radius: 4px;\r\n          }\r\n          .error {\r\n            margin: 0.5rem 0 0;\r\n            display: none;\r\n            color: brown;\r\n          }\r\n          .error.show {\r\n            display: block;\r\n          }\r\n        `}</style>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}